<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="register.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css" integrity="sha512-Kc323vGBEqzTmouAECnVceyQqyqdsSiqLQISBL29aUW4U/M7pSPA/gEUZQqv1cwx4OnYxTxve5UMg5GT6L4JJg==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <title>MovieShop</title>
</head>
<body>
    <header>
        <div class="header">
            <h1 class="logo">MovieShop</h1>
            <nav class="nav">
                <a class="navLink" href="index.html">Home</a>
                <a class="navLink" href="favourites.html"><i class="fa-solid fa-bookmark " style="color: #ff3333;"></i></a>
                <a class="navLink" href="Login.html">Login</a>
            </nav>
        </div>
    </header>
    <div class="containerRegister">
        <form>
            <h1>Register</h1>
            <p class="emailAndPassword">Username:</p>
            <input type="text" id="username" placeholder="Zeqa1">
            <p class="emailAndPassword">Email:</p>
            <input type="email" id="email" placeholder="example@gmail.com">
            <p>Password:</p>
            <input type="password" id="password" placeholder="*******">
            <p>Confirm Password:</p>
            <input type="password" id="confirmPassword" placeholder="*******">
            <button id="registerBtn">Register</button>
            <p>Already have an account? <a href="Login.html">Login here</a></p>
        </form>
    </div>
    <script type="module">
        
        document.getElementById('registerBtn').addEventListener('click', function(event) {
        event.preventDefault(); 
    
        const username = document.getElementById('username').value.trim();
        const email = document.getElementById('email').value.trim();
        const password = document.getElementById('password').value.trim();
        const confirmPassword = document.getElementById('confirmPassword').value.trim();
    
       
        if (!username || !email || !password || !confirmPassword) {
            alert("All fields are required!");
            return;
        }
    
        if (password !== confirmPassword) {
            alert('Password and Confirm Password must match');
            return;
        }
    
        
        const data = {
            username: username,
            email: email,
            password: password,
        };
    
        axios.post('https://673df73d0118dbfe86099351.mockapi.io/api/v1/users', data)
            .then(resp => {
                alert("User Created Successfully");
                
                window.location.href = "Login.html";
            })
            .catch(err => {
                console.error(err); 
                alert("An error occurred while creating the user. Please try again.");
            });
        });

        import Footer from '../components/Footer.js'
        document.getElementById('footer').innerHTML = Footer()
    </script>
    <footer id="footer" style="background-color: #000; color: #fff; text-align: center; padding: 20px 0;"></footer>
</body>
</html>